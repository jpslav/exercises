<%# Clients of this partial must supply the following variables:
    users
    user_group %>

<table width="100%">
  <tr>
    <th width="20%">First Name&nbsp;</th>
    <th width="20%">Last Name&nbsp;</th>
    <th width="20%">Username&nbsp;</th>
    <th width="25%">Email&nbsp;</th>
    <th width="15%"></th>
  </tr>

<% if users.nil? || users.empty? %>
  <tr>
      <td colspan="5">No results</td>
  </tr>
<% else %>
  <% users.each do |user| %>
  <tr>
    <td><%= user.first_name %>&nbsp;</td>
    <td><%= user.last_name %>&nbsp;</td>
    <td><%= user.username %>&nbsp;</td>
    <td><%= hide_email(user.email) %>&nbsp;</td>
    <td><% if user_group.has_user?(user) %>
          <%= 'Already in group' %>
        <% else %>
          <%= form_tag(user_group_user_group_users_path(user_group)) do |f| %>
            <%= hidden_field_tag 'user_id', user.id %>
            <%= submit_tag 'Add user' %>
          <% end %>
        <% end %></td>
  </tr>
  <% end %>
<% end %>
</table>
